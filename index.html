<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全跳转中...</title>
    <script>
        // 终极防升级方案 - 使用中间跳转页
        (function() {
            // 目标网址(必须是http)
            const targetUrl = 'http://jumei888.com';
            
            // 如果不是微信浏览器，直接跳转
            if(navigator.userAgent.indexOf('MicroMessenger') === -1) {
                window.location.href = targetUrl;
                return;
            }
            
            // 如果是微信浏览器且当前是https，先跳转到http中间页
            if(location.protocol === 'https:') {
                // 生成唯一的中间页URL，防止缓存
                const redirectorUrl = `http://${location.host}${location.pathname}?t=${Date.now()}`;
                
                // 使用meta刷新+js双重跳转确保成功率
                document.write(`
                    <meta http-equiv="refresh" content="0;url=${redirectorUrl}">
                    <script>window.location.href="${redirectorUrl}";<\/script>
                `);
                return;
            }
            
            // 如果是微信浏览器且已经是http，显示引导页面
            document.addEventListener('DOMContentLoaded', function() {
                // 这里放置您的引导页面代码
                // 当用户点击"在浏览器打开"后，最终会直接跳转http网址
            });
        })();
    </script>
    <style>
        /* 您的引导页样式 */
        body {
            font-family: -apple-system, sans-serif;
            padding: 20px;
            text-align: center;
        }
        .guide {
            background: white;
            border-radius: 10px;
            padding: 20px;
            max-width: 300px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .steps {
            text-align: left;
            margin: 20px 0;
        }
        .step {
            margin-bottom: 15px;
            display: flex;
        }
        .step-num {
            background: #07C160;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            flex-shrink: 0;
        }
        .url-box {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            word-break: break-all;
            font-size: 14px;
            margin: 15px 0;
        }
        .btn {
            background: #07C160;
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 5px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="guide">
        <h2>请在浏览器中打开</h2>
        <div class="steps">
            <div class="step">
                <div class="step-num">1</div>
                <div>点击右上角 <strong>•••</strong></div>
            </div>
            <div class="step">
                <div class="step-num">2</div>
                <div>选择"在浏览器打开"</div>
            </div>
        </div>
        
        <div class="url-box" id="url">http://jumei888.com</div>
        
        <button class="btn" id="copyBtn">复制链接</button>
    </div>

    <script>
        // 最终跳转逻辑
        document.getElementById('copyBtn').addEventListener('click', function() {
            const url = 'http://jumei888.com';
            const input = document.createElement('input');
            input.value = url;
            document.body.appendChild(input);
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            alert('链接已复制: ' + url);
        });
        
        // 检测是否已经是在外部浏览器
        if(navigator.userAgent.indexOf('MicroMessenger') === -1) {
            window.location.href = 'http://jumei888.com';
        }
    </script>
</body>
</html>
